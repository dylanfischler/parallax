/*! parallaxification : Dylan Fischler %> */
!function(a,b){var c={init:function(){return new d},kill:function(){}};P="parallax";var d=function(){var a=e();h(a)},e=function(){for(var a=b.querySelectorAll(".parallax"),c=[],d=0;d<a.length;++d){var e=a[d];if(e&&e.getAttribute(P+"-parent")&&e.getAttribute(P+"-start")&&e.getAttribute(P+"-end")){var h={el:e,parent:e.getAttribute(P+"-parent"),start:f(e.getAttribute(P+"-start")),end:f(e.getAttribute(P+"-end"))};console.log("parObj",h),h.start.length==h.end.length&&c.push(h)}}return g(c)},f=function(a){var b=a.split(";"),c={};for(var d in b)if(b[d].length>0){var e=b[d].split(":");c[e[0].trim()]=e[1].trim()}return c},g=function(a){var b=function(a,b,c){var d={};for(var e in a)if(a[e].split(" ").length>1){console.log("we have a tuple");var f=i(a[e]),g=i(b[e]);console.log("start, end",f,g);var h=[Math.abs(f[0]-g[0])/c,Math.abs(f[1]-g[1])/c];console.log("keyframe",h),parseInt(f[0])>parseInt(g[0])&&(h[0]*=-1),parseInt(f[1])>parseInt(g[1])&&(h[1]*=-1),d[e]=h}else{var f=j(a[e]),g=j(b[e]),h=Math.abs(f.val-g.val)/c;a[e]>=b[e]?d[e]=-1*h:d[e]=h}return d};for(var c in a)a[c].parentHeight=$(a[c].parent).height(),a[c].keyframes=b(a[c].start,a[c].end,a[c].parentHeight);return a},h=function(b){$(a).scroll(function(){for(var c in b){var d=b[c];if(m($(d.parent))){var e=$(a).scrollTop()-$(d.parent).offset().top;for(var f in d.start){var g;Array.isArray(d.keyframes[f])?(g=l(d.start[f],{progress:e,keyframes:d.keyframes[f]}),console.log("calc",g)):g=k(d.start[f],{progress:e,keyframes:d.keyframes[f]}),console.log(f,g),$(d.el).css(f,g)}}}})},i=function(a){var b=a.match(/(-)?(\d)+/g);return[b[0],b[1]]},j=function(a){var b,c,d=a.match(/px|em|%/g);return d?(c=d[0],b=parseInt(a.substring(0,a.indexOf(c)))):(b=parseInt(a.match(/(-)?(\d)+/g)[0]),c=""),{val:b,unit:c}},k=function(a,b){return a.replace(/(-)?(\d)+/,function(){return parseInt(a.match(/(-)?(\d)+/)[0])+parseInt(b.progress)*b.keyframes})},l=function(a,b){var c=a.replace(/(-)?(\d)+(%|px|em) (-)?(\d)+(%|px|em)/,function(){var c=j(a.match(/(-)?(\d)+(%|px|em)/g)[0]),d=j(a.match(/(-)?(\d)+(%|px|em)/g)[1]),e=String(c.val+parseInt(b.progress)*b.keyframes[0])+c.unit,f=String(d.val+parseInt(b.progress)*b.keyframes[1])+d.unit;return String(e)+" "+String(f)});return console.log("repl",c),c},m=function(a){"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]);var b=a.getBoundingClientRect();return b.top<=0&&b.bottom>=0};$(b).ready(function(){c.init()})}(window,document),function(a,b,c){a.fn.backstretch=function(d,e){return(d===c||0===d.length)&&a.error("No images were supplied for Backstretch"),0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),c=b.data("backstretch");if(c){if("string"==typeof d&&"function"==typeof c[d])return void c[d](e);e=a.extend(c.options,e),c.destroy(!0)}c=new f(this,d,e),b.data("backstretch",c)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var d={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},e={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},f=function(c,e,f){this.options=a.extend({},a.fn.backstretch.defaults,f||{}),this.images=a.isArray(e)?e:[e],a.each(this.images,function(){a("<img />")[0].src=this}),this.isBody=c===document.body,this.$container=a(c),this.$root=this.isBody?a(g?b:document):this.$container,c=this.$container.children(".backstretch").first(),this.$wrap=c.length?c:a('<div class="backstretch"></div>').css(d).appendTo(this.$container),this.isBody||(c=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===e?0:e,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&g?"fixed":"absolute"}),this.index=0,this.show(this.index),a(b).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};f.prototype={resize:function(){try{var a,c={left:0,top:0},d=this.isBody?this.$root.width():this.$root.innerWidth(),e=d,f=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),g=e/this.$img.data("ratio");g>=f?(a=(g-f)/2,this.options.centeredY&&(c.top="-"+a+"px")):(g=f,e=g*this.$img.data("ratio"),a=(e-d)/2,this.options.centeredX&&(c.left="-"+a+"px")),this.$wrap.css({width:d,height:f}).find("img:not(.deleteable)").css({width:e,height:g}).css(c)}catch(h){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var c=this,d=c.$wrap.find("img").addClass("deleteable"),f={relatedTarget:c.$container[0]};return c.$container.trigger(a.Event("backstretch.before",f),[c,b]),this.index=b,clearInterval(c.interval),c.$img=a("<img />").css(e).bind("load",function(e){var g=this.width||a(e.target).width();e=this.height||a(e.target).height(),a(this).data("ratio",g/e),a(this).fadeIn(c.options.speed||c.options.fade,function(){d.remove(),c.paused||c.cycle(),a(["after","show"]).each(function(){c.$container.trigger(a.Event("backstretch."+this,f),[c,b])})}),c.resize()}).appendTo(c.$wrap),c.$img.attr("src",c.images[b]),c}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var g,h=navigator.userAgent,i=navigator.platform,j=h.match(/AppleWebKit\/([0-9]+)/),j=!!j&&j[1],k=h.match(/Fennec\/([0-9]+)/),k=!!k&&k[1],l=h.match(/Opera Mobi\/([0-9]+)/),m=!!l&&l[1],n=h.match(/MSIE ([0-9]+)/),n=!!n&&n[1];g=!((-1<i.indexOf("iPhone")||-1<i.indexOf("iPad")||-1<i.indexOf("iPod"))&&j&&534>j||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||l&&7458>m||-1<h.indexOf("Android")&&j&&533>j||k&&6>k||"palmGetResource"in b&&j&&534>j||-1<h.indexOf("MeeGo")&&-1<h.indexOf("NokiaBrowser/8.5.0")||n&&6>=n)}(jQuery,window);